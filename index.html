function doGet(e) {
  // Fetch products from Google Sheet
  const sheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getSheetByName('Products');
  const data = sheet.getDataRange().getValues();
  
  const products = [];
  for (let i = 1; i < data.length; i++) {
    products.push({
      id: data[i][0],
      name: data[i][1],
      category: data[i][2],
      price: data[i][3],
      salePrice: data[i][4],
      description: data[i][5],
      image: data[i][6],
      stock: data[i][7],
      rating: data[i][8]
    });
  }
  
  return ContentService.createTextOutput(JSON.stringify(products))
    .setMimeType(ContentService.MimeType.JSON);
}

function doPost(e) {
  // Process orders and save to Google Sheet
  const orderData = JSON.parse(e.postData.contents);
  const orderSheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getSheetByName('Orders');
  
  const timestamp = new Date();
  const orderItems = JSON.stringify(orderData.items);
  
  orderSheet.appendRow([
    timestamp,
    orderData.customerName,
    orderData.customerEmail,
    orderData.customerAddress,
    orderItems,
    orderData.totalAmount,
    'Pending'
  ]);
  
  return ContentService.createTextOutput(JSON.stringify({status: 'success'}))
    .setMimeType(ContentService.MimeType.JSON);
}
